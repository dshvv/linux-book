---
hide_title: true
---


## 给电脑加块磁盘 
当我们在电脑上装上一块硬盘或U盘时，Windows系统能够自动识别该硬盘并分配一个盘符，这实际上是Windows系统能自动挂载硬盘，而不是像Linux系统那样还需要运行命令手动挂载磁盘。所以接下来我们就学些如何给装有linux系统的电脑装块硬盘，并让其识别和能被使用。


**1、查看当前所有磁盘信息**

`lsblk`命令 用于列出所有可用块设备的信息，如下即可得知目前电脑上一共有3块磁盘sr0、vda、vdb   
其中10GB的vdb即是我刚才插入的新磁盘名字。
```shell
[root@VM-24-8-centos ~]# lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
vda    253:0    0    80G  0 disk 
└─vda1 253:1    0    80G  0 part /
vdb    253:16   0    10G  0 disk 
```

**2、分区**

全新的硬盘是不能使用的，因为需要分区，如同windows一样，你也需要将一块硬盘分区为C、D。    
一般Linux 系统目录结构/dev（Device缩写）目录下存放的是外部设备，在 Linux 中访问设备的方式和访问文件的方式是相同的。    
所以推测新的硬盘的目标位置应该是`/dev/vdb`,使用`fdisk -l`即可输出所有的硬盘和其下分区具体信息，如下，所以我们推测没错。
```shell
[root@VM-24-8-centos ~]# fdisk -l
# 第一块磁盘信息
Disk /dev/vda：80 GiB，85899345920 字节，167772160 个扇区
单元：扇区 / 1 * 512 = 512 字节
扇区大小(逻辑/物理)：512 字节 / 512 字节
I/O 大小(最小/最佳)：512 字节 / 512 字节
磁盘标签类型：dos
磁盘标识符：0x89ee0607
# 第一块磁上的分区列表
设备       启动  起点      末尾      扇区 大小 Id 类型
/dev/vda1  *     2048 167772126 167770079  80G 83 Linux

# 第二块磁盘信息
Disk /dev/vdb：10 GiB，10737418240 字节，20971520 个扇区
单元：扇区 / 1 * 512 = 512 字节
扇区大小(逻辑/物理)：512 字节 / 512 字节
I/O 大小(最小/最佳)：512 字节 / 512 字节
磁盘标签类型：dos
磁盘标识符：0x7d1085d3
```

找到磁盘后开始对其分区，输入命令
```shell
磁盘标识符：0x7d1085d3
[root@VM-24-8-centos ~]# fdisk /dev/vdb   #第1步：打开fdisk软件

欢迎使用 fdisk (util-linux 2.32.1)。
更改将停留在内存中，直到您决定将更改写入磁盘。
使用写入命令前请三思。


命令(输入 m 获取帮助)：n  # 第2步：n创建分区
分区类型
   p   主分区 (0个主分区，0个扩展分区，4空闲)
   e   扩展分区 (逻辑分区容器)
选择 (默认 p)：p # 第3步：选择分区类型，默认即可
分区号 (1-4, 默认  1): 1 # 第4步：给分区选一个id，默认即可
第一个扇区 (2048-20971519, 默认 2048): 2048 # 第5步：给分区选其实位置，默认即可
上个扇区，+sectors 或 +size{K,M,G,T,P} (2048-20971519, 默认 20971519): +200M  # 第6步：给分区设置大小

创建了一个新分区 1，类型为“Linux”，大小为 200 MiB。
命令(输入 m 获取帮助)：w # 第6步：输入w，意思是保存操作
分区表已调整。
将调用 ioctl() 来重新读分区表。
正在同步磁盘。
```
此时再执行`lsblk`或`fdisk -l`或者`blkid`既可以看到我们对这块新硬盘创建的新分区
```shell
[root@VM-24-8-centos ~]# lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
vda    253:0    0    80G  0 disk 
└─vda1 253:1    0    80G  0 part /
vdb    253:16   0    10G  0 disk 
└─vdb1 253:17   0   200M  0 part  # 这里MOUNTPOINT为空说明该分区尚未挂载
```

**3、格式化并指定文件系统**

给刚才分的区格式化并指定文件系统类型
```shell
mkfs.xfs /dev/vdb1
```

**4、挂载分区到系统**

不同于windows，linux需要手动挂载分区，方可使用新磁盘。

找到你创建分区vdb1的uuid，记下来
```shell
[root@VM-24-8-centos ~]# blkid
/dev/sr0: BLOCK_SIZE="2048" UUID="2022-01-09-00-05-05-00" LABEL="config-2" TYPE="iso9660"
/dev/vda1: UUID="659e6f89-71fa-463d-842e-ccdf2c06e0fe" BLOCK_SIZE="4096" TYPE="ext4" PARTUUID="89ee0607-01"
/dev/vdb1: UUID="5cd54cb8-656f-4477-a620-b19b164d651a" BLOCK_SIZE="512" TYPE="xfs" PARTUUID="7d1085d3-01"
```
    
我们创建一个目录，名字随意，比如叫做`/mydist`,然后将vdb1分区挂载到这里。    
编辑`vim /etc/fstab`，增加如下这行
```shell
UUID=5cd54cb8-656f-4477-a620-b19b164d651a /mydist                       xfs    defaults        0 0
```

然后再来看看是不是已经挂载上了
```shell
[root@VM-24-8-centos ~]# lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
...
vdb    253:16   0    10G  0 disk 
└─vdb1 253:17   0   200M  0 part /mydist  # 这里MOUNTPOINT说明该分区已经挂载到了/mydist上了
```
当然也可以用mount来进行挂载，挂载的办法有很多，这里说一种。

**5、结语**

到此，你就可以快乐的使用你的新磁盘啦。    
无论你在`/mydist`存多少东西，甚至此处坏掉，都不会影响你的系统，它和你的系统所用的第一块(主)硬盘完全独立分开的。