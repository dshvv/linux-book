# 第2章 常用命令

## 什么是shell
Shell 是一个用 C 语言编写的程序，它是用户使用 Linux 的桥梁。
我们所要做的就是学习好常用的shell脚本,只有这样才能更好的使用linux。

## Shell 环境
Shell 编程跟 JavaScript、php 编程一样，只要有一个能编写代码的文本编辑器和一个能解释执行的脚本解释器就可以了。    
Linux 的 Shell 种类众多，常见的有：
```shell
Bourne Shell（/usr/bin/sh或/bin/sh）
Bourne Again Shell（/bin/bash）
C Shell（/usr/bin/csh）
K Shell（/usr/bin/ksh）
Shell for Root（/sbin/sh）
……
```
不同的shell具备不同的功能，shell还决定了脚本中函数的语法，流行的shell有ash、bash、ksh、csh、zsh等，不同的shell都有自己的特点以及用途。    
本教程关注的是 Bash，也就是 Bourne Again Shell，由于易用和免费，Bash 在日常工作中被广泛使用。同时，Bash 也是大多数Linux 系统默认的 Shell。    
在一般情况下，人们并不区分 Bourne Shell 和 Bourne Again Shell，所以，像 #!/bin/sh，它同样也可以改为 #!/bin/bash。    
`#!` 告诉系统其后路径所指定的程序即是解释此脚本文件的 Shell 程序

查看当前使用的shell类型
```shell
echo $SHELL
```

## 命令-echo
先学这一个命令吧，学会了这个命令方便后边的学习。    
echo 指令与 PHP 的 echo 指令类似，都是用于字符串的输出。命令格式：
```shell
echo "hello"
```
在shel中双引号其实是可以省略，以下命令与上面实例效果一致
```shell
echo hello
```

ehco还有个重要的能力，它可以将内如指定输出到具体文件中
```shell
echo "It is a test" > myfile
```

## 语法-变量
变量就是可以变化的量，是程序中最基本的存储单元。      
**定义**  
定义一个变量，打印出来。   
然后修改下，再打印一下
```shell
myName="张三"
echo $myName 
myName="李四" # 已定义的变量，可以被重新赋值
echo ${myName}
```
使用一个定义过的变量，只要在变量名前面加美元符号即可,外面的花括号是可选的,但还是推荐用花括号。

**删除**   
使用 unset 命令可以删除变量，变量被删除后不能再次使用。
```shell
myName="张三"
unset myName
echo $myName
```
以上实例执行将没有任何输出。

**只读**   
使用 readonly 命令可以将变量定义为只读变量，只读变量的值不能被改变，也不能被删除。    
这个就很像其他语言中的常量了。
```shell
myUrl="https://www.google.com"
readonly myUrl
myUrl="https://www.baidu.com"
```
运行脚本，结果如下：
```shell
myUrl: 只读变量
```

## 语法-数组
Bash Shell 只支持一维数组，初始化时不需要定义数组大小。   
下标由 0 开始，用括号来表示，元素用"空格"符号分割开。

**定义**   
```shell
myArr=(A B "C" D)
```

也可以使用下标来定义数组
```shell
myArr[0]=A
myArr[1]=B
```
**读取**
```shell
myArr=(A "B")
echo "第一个元素为: ${myArr[0]}"
echo "第二个元素为: ${myArr[1]}"
echo "数组的元素为: ${myArr[*]}"
echo "数组的元素个数为: ${#myArr[*]}"
# 使用@ 或 * 可以获取数组中的所有元素， 前边加一个＃则获取个数
```

## 语法-运算符
Shell 和其他编程语言一样，支持多种运算符，包括：
* 算数运算符
* 关系运算符
* 布尔运算符
* 字符串运算符
* 文件测试运算符

**算术运算**    
原生bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr 。   
expr 是一款表达式计算工具，最常用，使用它能完成表达式的求值操作。    
完整的表达式要被 ` `` ` 包含，表达式两侧有空格。
```shell
sum1=`expr 1 + 2`
echo "两数之和为 : $sum1"

num1=2
num2=3 
sum2=`expr $1 + $2`
echo "两数之和为 : $sum2"
```
除了加法之外还有这些算数运算符

| 运算符 |	说明 |	举例 |
| --- | --- | --- |
| + | 加法 | `expr $a + $b` 结果为 30。 |
| - | 减法 | `expr $a - $b` 结果为 -10。 |
| * | 乘法 | `expr $a \* $b` 结果为  200。 |
| / | 除法 | `expr $b / $a` 结果为 2。 |
| % | 取余 | `expr $b % $a` 结果为 0。 |
| = | 赋值 | a=$b 把变量 b 的值赋给 a。 |
| == |	相等 | 用于比较两个数字，相同则返回 true。	[ $a == $b ] 返回 false。 |
| != |	不相等 | 用于比较两个数字，不相同则返回 true。	[ $a != $b ] 返回 true。 |


**关系运算符**   
关系运算符只支持数字比较。   
比如检测两个数是否相等。
```shell
a=1
b=2
if [ $a -eq $b ]
then echo "a、b相等" 
else echo "a、b不等"
fi
```
如上if...then...fi 是条件语句，后续会讲。
除了是否相等的比较外，还有这些关系运算符

| 运算符 | 说明 | 举例 |
| --- | --- | --- |
| -eq |	检测两个数是否相等，相等返回 true。 | [ $a -eq $b ] 返回 false。 |
| -ne |	检测两个数是否不相等，不相等返回 true。 | [ $a -ne $b ] 返回 true。 |
| -gt |	检测左边的数是否大于右边的，如果是，则返回 true。 |	[ $a -gt $b ] 返回 false。 |
| -lt |	检测左边的数是否小于右边的，如果是，则返回 true。 |	[ $a -lt $b ] 返回 true。 |
| -ge |	检测左边的数是否大于等于右边的，如果是，则返回 true。 |	[ $a -ge $b ] 返回 false。 |
| -le |	检测左边的数是否小于等于右边的，如果是，则返回 true。 |	[ $a -le $b ] 返回 true。 |